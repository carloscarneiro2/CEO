<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Temporizador SCG</title>
  <style>
    :root {
      --blue-dark: #0d47a1;
      --blue-mid: #1976d2;
      --bg-gradient: linear-gradient(135deg, #0d47a1, #1976d2);
      --white: #fff;
    }
    body {
      margin: 0;
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background: var(--bg-gradient);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      color: var(--white);
    }
    .topbar {
      padding: 25px 20px;
      text-align: center;
      border-bottom-left-radius: 30px;
      border-bottom-right-radius: 30px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }
    .topbar h1 {
      font-size: 36px;
      font-weight: 900;
      margin: 0;
      color: white;
    }
    .topbar p {
      margin: 5px 0 0;
      font-size: 16px;
      color: #cfd8dc;
    }
    .container {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    .inputs {
      display: flex;
      gap: 15px;
      margin: 20px 0;
      flex-wrap: wrap;
      justify-content: center;
    }
    .inputs input, .inputs select {
      padding: 10px;
      border-radius: 8px;
      border: none;
      font-size: 16px;
      min-width: 180px;
    }
    .timer {
      font-size: 60px;
      font-weight: bold;
      margin: 30px 0;
      color: lightgreen;
    }
    .buttons {
      margin-bottom: 20px;
    }
    button.stop {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      background: red;
      color: white;
      transition: 0.3s;
    }
    button.stop:hover { opacity: 0.9; transform: translateY(-2px); }
    .etapas {
      width: 100%;
      max-width: 500px;
    }
    .etapa {
      background: rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 15px;
      margin: 10px 0;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .etapa h3 {
      margin: 0;
      font-size: 18px;
      color: #bbdefb;
    }
    .footer {
      text-align: center;
      padding: 15px;
      font-size: 14px;
      color: #cfd8dc;
      background: rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>
  <div class="topbar">
    <h1>Temporizador SCG</h1>
    <p>Controle de etapas operacionais</p>
  </div>

  <div class="container">
    <div class="inputs">
      <input type="number" id="dt" placeholder="Digite a DT" oninput="startOnDT()">
      <select id="blocos">
        <option value="1">01 Bloco (Truck)</option>
        <option value="2">02 Blocos (Carreta)</option>
        <option value="3">03 Blocos (Carreta)</option>
        <option value="2">02 Blocos (Sider)</option>
        <option value="3">03 Blocos (Sider)</option>
      </select>
    </div>

    <div class="timer" id="timer">00:00</div>

    <div class="buttons">
      <button class="stop" onclick="parar()">Parar</button>
    </div>

    <div class="etapas">
      <div class="etapa"><h3>1ª Etapa: Descarregamento MCE</h3><div id="etapa1"></div></div>
      <div class="etapa"><h3>2ª Etapa: Carregamento</h3><div id="etapa2"></div></div>
      <div class="etapa"><h3>3ª Etapa: Enlonamento</h3><div id="etapa3"></div></div>
    </div>
  </div>

  <div class="footer">© Cebrace — Sistema de Temporizador</div>

  <script>
    let segundos = 0;
    let intervalo = null;
    let etapaAtual = 1;

    const limitesBase = {1: 5*60, 2: 20*60, 3: 32*60}; // em segundos

    function formatarTempo(segundos) {
      const min = String(Math.floor(segundos/60)).padStart(2,'0');
      const sec = String(segundos%60).padStart(2,'0');
      return `${min}:${sec}`;
    }

    function atualizarDisplay() {
      const timerEl = document.getElementById("timer");
      timerEl.textContent = formatarTempo(segundos);
      const blocos = parseInt(document.getElementById("blocos").value);
      const limite = limitesBase[etapaAtual] * blocos;
      if(segundos > limite) {
        timerEl.style.color = "red";
      } else {
        timerEl.style.color = "lightgreen";
      }
    }

    function iniciar() {
      if(intervalo) return;
      intervalo = setInterval(() => {
        segundos++;
        atualizarDisplay();
      }, 1000);
    }

    function startOnDT() {
      const dt = document.getElementById("dt").value;
      if(dt && !intervalo) {
        segundos = 0;
        etapaAtual = 1;
        atualizarDisplay();
        iniciar();
      }
    }

    function parar() {
      clearInterval(intervalo);
      intervalo = null;
      document.getElementById("etapa"+etapaAtual).textContent = "Tempo: " + formatarTempo(segundos);
    }
  </script>
</body>
</html>